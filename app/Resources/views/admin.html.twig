<!doctype html>
<html lang="en-US">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <title>Verant Admin</title>
        <meta name="description" content="" />
        <meta name="Author" content="Dorin Grigoras [www.stepofweb.com]" />

        <!-- mobile settings -->
        <meta name="viewport" content="width=device-width, maximum-scale=1, initial-scale=1, user-scalable=0" />

        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400%7CRaleway:300,400,500,600,700%7CLato:300,400,400italic,600,700'" rel="stylesheet" type="text/css" />

        <!-- CORE CSS -->
        <link href="{{ asset('admin/assets/plugins/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet" type="text/css" />

        <!-- THEME CSS -->
        <link href="{{ asset('admin/assets/css/essentials.css') }}" rel="stylesheet" type="text/css" />

        <link href="{{ asset('admin/assets/css/layout.css') }}" rel="stylesheet" type="text/css" />
        <link href="{{ asset('admin/assets/css/color_scheme/green.css') }}" rel="stylesheet" type="text/css" id="color_scheme" />

        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/css/bootstrap-select.min.css">

    </head>
    <!--
            .boxed = boxed version
    -->
    <body>


        <!-- WRAPPER -->
        <div id="wrapper" class="clearfix">

            <!-- 
                    ASIDE 
                    Keep it outside of #wrapper (responsive purpose)
            -->
            <aside id="aside">
                <!--
                        Always open:
                        <li class="active alays-open">

                        LABELS:
                                <span class="label label-danger pull-right">1</span>
                                <span class="label label-default pull-right">1</span>
                                <span class="label label-warning pull-right">1</span>
                                <span class="label label-success pull-right">1</span>
                                <span class="label label-info pull-right">1</span>
                -->
                <nav id="sideNav"><!-- MAIN MENU -->
                    <ul class="nav nav-list">
                        <li class="active"><!-- dashboard -->
                            <a class="dashboard" href="#"><!-- warning - url used by default by ajax (if eneabled) -->
                                <i class="main-icon fa fa-dashboard"></i> <span>Dashboard</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-menu-arrow pull-right"></i>
                                <i class="main-icon fa fa-users"></i>
                                <span>Usuarios</span>
                            </a>
                            <ul><!-- submenus -->
                                <li>
                                    <a href="{{ path('usuario_index') }}">
                                        Verant
                                    </a>
                                </li>
                                <li>
                                    <a href="{{ path('usuario_empresa_index') }}">
                                        Empresa
                                    </a>
                                </li>
                                <li>
                                    <a href="{{ path('usuario_natural_index') }}">
                                        Persona Natural
                                    </a>
                                </li>
                                
                            </ul>
                        </li>
                        <li>
                            <a href="{{ path('empresa_index') }}">
                                
                                <i class="main-icon fa fa-industry"></i> <span>Empresa</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-menu-arrow pull-right"></i>
                                <i class="main-icon fa fa-pencil-square-o"></i> 
                                <span>Web</span>
                            </a>
                            <ul><!-- submenus -->
                                <li>
                                    <a href="{{ path('contenido_index') }}">
                                        Contenido
                                    </a>
                                </li>
                                <li>
                                    <a href="{{ path('proceso_index') }}">
                                        Procesos
                                    </a>
                                </li>
                                <li>
                                    <a href="{{ path('servicio_index') }}">
                                        Servicios
                                    </a>
                                </li>
                                <li>
                                    <a href="{{ path('cliente_index') }}">
                                        Clientes
                                    </a>
                                </li>
                                <li>
                                    <a href="{{ path('faq_index') }}">
                                        FAQ
                                    </a>
                                </li>
                                <li role="separator" class="divider"></li>
                                <li>
                                    <a href="{{ path('datosverant_edit', {'id' : 1}) }}">
                                        Datos Verant
                                    </a>
                                </li>
                                <li>
                                    <a href="{{ path('horario_index') }}">
                                        Horario
                                    </a>
                                </li>
                            </ul>
                        </li>

                    </ul>

                    <!-- SECOND MAIN LIST -->
                    <h3>Mas</h3>
                    <ul class="nav nav-list">
                        <li>
                            <a href="{{ path('pregunta_index') }}">
                                <i class="main-icon fa fa-question"></i>
                                <span>Preguntas Externas</span>
                            </a>
                        </li>
                        <li>
                            <a href="{{ path('contacto_index') }}">
                                <i class="main-icon fa fa-question-circle"></i>
                                <span>Contacto</span>
                            </a>
                        </li>
                        <li>
                            <a href="{{ path('web_verant_homepage') }}" target="_blank">
                                <i class="main-icon fa fa-sitemap"></i>
                                <span>Ir a WEB</span>
                            </a>
                        </li>
                    </ul>

                </nav>

                <span id="asidebg"><!-- aside fixed background --></span>
            </aside>
            <!-- /ASIDE -->


            <!-- HEADER -->
            <header id="header">

                <!-- Mobile Button -->
                <button id="mobileMenuBtn"></button>

                <!-- Logo -->
                <span class="logo pull-left">
                    <img src="{{ asset('public/assets/images/logo_light.png') }}" alt="admin panel" height="35" />
                </span>

                <!--<form method="get" action="page-search.html" class="search pull-left hidden-xs">
                        <input type="text" class="form-control" name="k" placeholder="Search for something..." />
                </form>-->

                <nav>

                    <!-- OPTIONS LIST -->
                    <ul class="nav pull-right">

                        <!-- USER OPTIONS -->
                        <li class="dropdown pull-left">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                                <span class="fa fa-user"></span> 
                                <span class="user-name">
                                    <span class="hidden-xs">
                                        {{ app.session.get('nombres') ~ ' ' ~ app.session.get('apPat')}} <i class="fa fa-angle-down"></i>
                                    </span>
                                </span>
                            </a>
                            <ul class="dropdown-menu hold-on-click">
                                <!--<li>
                                    <a href="calendar.html"><i class="fa fa-calendar"></i> Calendar</a>
                                </li>
                                <li>
                                    <a href="#"><i class="fa fa-envelope"></i> Inbox
                                        <span class="pull-right label label-default">0</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="page-user-profile.html"><i class="fa fa-cogs"></i> Settings</a>
                                </li>

                                <li class="divider"></li>

                                <li>
                                    <a href="page-lock.html"><i class="fa fa-lock"></i> Lock Screen</a>
                                </li>-->
                                <li>
                                    <a href="{{ path('web_verant_logout') }}"><i class="fa fa-power-off"></i> Log Out</a>
                                </li>
                            </ul>
                        </li>
                        <!-- /USER OPTIONS -->

                    </ul>
                    <!-- /OPTIONS LIST -->

                </nav>

            </header>
            <!-- /HEADER -->

            <!-- 
                MIDDLE 
            -->
            {% for flashMessage in app.session.flashbag.get('mensaje') %}
                <span class="alert-success">
                    {{ flashMessage }}
                    </br>
                </span>
            {% endfor %}
            <section id="middle">

            {% block middle %}{% endblock %}

        </section>
        <!-- /MIDDLE -->


    </div>




    <!-- JAVASCRIPT FILES -->
    <script type="text/javascript">var plugin_path = "{{ asset('admin/assets/plugins/') }}";</script>
    <script type="text/javascript" src="{{ asset('admin/assets/plugins/jquery/jquery-2.1.4.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('admin/assets/js/app.js') }}"></script>
    <!--<script type="text/javascript" src="{# asset('admin/assets/js/scripts.js') #}"></script>--!


    <!-- Latest compiled and minified JavaScript -->
    <script type="text/javascript" src="{{ asset('admin/bootstrap-select-1.10.0/js/bootstrap-select.js') }}" ></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>-->
    
    
    
    <!-- (Optional) Latest compiled and minified JavaScript translation files -->
    <script type="text/javascript" src="{{ asset('admin/bootstrap-select-1.10.0/dist/js/i18n/defaults-es_CL.min.js') }}" ></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/i18n/defaults-*.min.js"></script>-->
    
    <!-- Validador RUT -->
    <script type="text/javascript" src="{{ asset('rut/jquery.Rut.min.js') }}"></script>  
    <script type="text/javascript">
        $(function(){
            $('#usuario_rut').Rut({
                on_error: function () {
                    alert('Rut incorrecto');
                }
            });
            $('#usuario_empresa_rut').Rut({
                on_error: function () {
                    alert('Rut incorrecto');
                }
            });
            $('#usuario_natural_rut').Rut({
                on_error: function () {
                    alert('Rut incorrecto');
                }
            });
            $('#empresa_rut').Rut({
                on_error: function () {
                    alert('Rut incorrecto');
                }
            });
            $('#datos_verant_rut').Rut({
                on_error: function () {
                    alert('Rut incorrecto');
                }
            });
        });
        
        $(function(){
            var button = $('.file-upload-button').html();
            $('button .file-upload-button').text('Archivo');
        });
        
        //AJAX COMUNAS
        $(document).ready(function () {

        $('#usuario_region').change(function (e) {
            e.preventDefault();

            var data = $(this).val();
            $.ajax({
                method: "post",
                url: "/verant/provincias/comuna/" + data,
                dataType: "json",
                success: function (data) {
                    var $ciudad = $('#usuario_ciudad');
                    $ciudad.html('<option>Ciudad</option>');

                    for (var i = 0, total = data.length; i < total; i++) {
                        $ciudad.append('<option value="' + data[i].id + '">' + data[i].nombre + '</option>');
                    }

                }
            });
        });
        
        $('#usuario_ciudad').change(function (e) {
            e.preventDefault();

            var data = $(this).val();
            $.ajax({
                method: "post",
                url: "/verant/provincias/comuna/" + data,
                dataType: "json",
                success: function (data) {
                    var $comuna = $('#usuario_comuna');
                    $comuna.html('<option>Ciudad</option>');

                    for (var i = 0, total = data.length; i < total; i++) {
                        $comuna.append('<option value="' + data[i].id + '">' + data[i].nombre + '</option>');
                    }

                }
            });
        });
        
        $('#usuario_natural_region').change(function (e) {
            e.preventDefault();

            var data = $(this).val();
            $.ajax({
                method: "post",
                url: "/verant/provincias/comuna/" + data,
                dataType: "json",
                success: function (data) {
                    var $ciudad = $('#usuario_natural_ciudad');
                    $ciudad.html('<option>Ciudad</option>');

                    for (var i = 0, total = data.length; i < total; i++) {
                        $ciudad.append('<option value="' + data[i].id + '">' + data[i].nombre + '</option>');
                    }

                }
            });
        });
        
        $('#usuario_natural_ciudad').change(function (e) {
            e.preventDefault();

            var data = $(this).val();
            $.ajax({
                method: "post",
                url: "/verant/provincias/comuna/" + data,
                dataType: "json",
                success: function (data) {
                    var $comuna = $('#usuario_natural_comuna');
                    $comuna.html('<option>Ciudad</option>');

                    for (var i = 0, total = data.length; i < total; i++) {
                        $comuna.append('<option value="' + data[i].id + '">' + data[i].nombre + '</option>');
                    }

                }
            });
        });
        
        $('#usuario_empresa_region').change(function (e) {
            e.preventDefault();

            var data = $(this).val();
            $.ajax({
                method: "post",
                url: "/verant/provincias/comuna/" + data,
                dataType: "json",
                success: function (data) {
                    var $ciudad = $('#usuario_empresa_ciudad');
                    $ciudad.html('<option>Ciudad</option>');

                    for (var i = 0, total = data.length; i < total; i++) {
                        $ciudad.append('<option value="' + data[i].id + '">' + data[i].nombre + '</option>');
                    }

                }
            });
        });
        
        $('#usuario_empresa_ciudad').change(function (e) {
            e.preventDefault();

            var data = $(this).val();
            $.ajax({
                method: "post",
                url: "/verant/provincias/comuna/" + data,
                dataType: "json",
                success: function (data) {
                    var $comuna = $('#usuario_empresa_comuna');
                    $comuna.html('<option>Ciudad</option>');

                    for (var i = 0, total = data.length; i < total; i++) {
                        $comuna.append('<option value="' + data[i].id + '">' + data[i].nombre + '</option>');
                    }

                }
            });
        });
        
        $('#empresa_region').change(function (e) {
            e.preventDefault();

            var data = $(this).val();
            $.ajax({
                method: "post",
                url: "/verant/provincias/comuna/" + data,
                dataType: "json",
                success: function (data) {
                    var $ciudad = $('#empresa_ciudad');
                    $ciudad.html('<option>Ciudades</option>');

                    for (var i = 0, total = data.length; i < total; i++) {
                        $ciudad.append('<option value="' + data[i].id + '">' + data[i].nombre + '</option>');
                    }

                }
            });
        });
        
        $('#empresa_ciudad').change(function (e) {
            e.preventDefault();

            var data = $(this).val();
            $.ajax({
                method: "post",
                url: "/verant/provincias/comuna/" + data,
                dataType: "json",
                success: function (data) {
                    var $comuna = $('#empresa_comuna');
                    $comuna.html('<option>Comunas</option>');

                    for (var i = 0, total = data.length; i < total; i++) {
                        $comuna.append('<option value="' + data[i].id + '">' + data[i].nombre + '</option>');
                    }

                }
            });
        });
    });
    </script>
</body>
</html>